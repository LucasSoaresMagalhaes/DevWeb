<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/6975c4d52f.js" crossorigin="anonymous"></script>
    <link id="cor" rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="my-slider.css" />
    <script src="javascript-slider.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="shortcut icon" href="/img/logo_puc-minas_eDPHd9.png">
    <title>APPUC - Criar conta</title>
</head>

<body>

    <div class="background">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>


    <div class="login">

        <div class="cards" id="leformulario">
            <div class="formularioslogin">
                <div class="row">
                    <div class="form-floating mb-3 col-4">
                        <input type="email" class="form-control" id="email" placeholder="nome@example.com">
                        <label for="email">e-mail</label>
                    </div>
                    <div class="form-floating mb-3 col-4">
                        <input type="cidade" class="form-control" id="nome" placeholder="name">
                        <label for="nome">Nome</label>
                    </div>
                    <div class="form-floating mb-3 col-4">
                        <input type="cidade" class="form-control" id="cidade" placeholder="cidade">
                        <label for="cidade">Cidade</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-floating mb-3 col-4">
                        <input type="cidade" class="form-control" id="categoria" placeholder="Cidade">
                        <label for="categoria">Curso ou setor</label>
                    </div>

                    <div class="form-floating mb-3 col-4">
                        <input type="date" class="form-control" id="date" placeholder="aa/mm/aaaa">
                        <label for="date">Data de nascimento</label>
                    </div>

                    <div class="form-floating mb-3 col-4">
                        <input type="password" class="form-control" id="npessoal" placeholder="Senha">
                        <label for="npessoal">Número pessoal</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-floating mb-3 col-6">
                        <input type="password" class="form-control" id="password" placeholder="Senha">
                        <label for="password">Senha</label>
                    </div>
                    <div class="form-floating mb-3 col-6">
                        <input type="password" class="form-control" id="confirmpassword" placeholder="Senha">
                        <label for="confirmpassword">Confirmar senha</label>

                    </div>
                </div>
            </div>
            <div class="editare">
                <div class="imageContainer">
                    <img src="/img/Portrait_Placeholder.png" class="imgalunobusca" id="imgPhoto">
                </div>
                <div id="img">
                    <input type="file" id="flImage" name="fImage" accept="image/*">
                </div>
            </div>
            <button class="btn btn-primary" type="submit" onclick="novoconfirma()">Criar conta</button>
            <a class="btn btn-primary" href="login.html" role="button">Voltar</a>

        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="registrados.js"></script>

    <script>


        let photo = document.getElementById('imgPhoto');
        let file = document.getElementById('flImage');

        file.addEventListener('change', () => {

            if (file.files.length <= 0) {
                return;
            }

            let reader = new FileReader();

            reader.onload = () => {
                photo.src = reader.result;
            }

            reader.readAsDataURL(file.files[0]);
        });

    </script>

    <script>

        function novoconfirma() {

            let verificacao = true;

            if ($("#email").val() == '' || $("#nome").val() == '' || $("#cidade").val() == '' || $("#categoria").val() == '' || $("#date").val() == '' || $("#password").val() == '' || $("#confirmpassword").val() == '' || $("#npessoal").val() == '') {
                alert("PREENCHA TODOS OS CAMPOS")
                verificacao = false;
            }
            else
                if ($("#password").val() != $("#confirmpassword").val()) {
                    alert("CONFIRME SUA SENHA E TENTE NOVAMENTE")
                    verificacao = false
                }
                else {
                    for (let j = 0; j < db.data.length; j++) {
                        if (db.data[j].email == $("#email").val()) {
                            alert("E-MAIL JÁ REGISTRADO")
                            verificacao = false;
                        }
                    }
                }

            if (verificacao == true) {

                let campoId = document.getElementById('imgPhoto').src;
                let campoNome = $("#nome").val();
                let campoEmail = $("#email").val();
                let Campocidade = $("#cidade").val();
                let camponpessoal = $("#npessoal").val();
                let campoCategoria = $("#categoria").val();
                let campoTelefone = "";
                let campoNota = "";
                let camposenha = $("#password").val();
                let campoIdade = $("#date").val();

                let contato = {
                    cidade: Campocidade,
                    id: campoId,
                    nome: campoNome,
                    numero_pessoal: camponpessoal,
                    dataNasc: campoIdade,
                    email: campoEmail,
                    bio: "",
                    categoria: campoCategoria,
                    nota: campoNota,
                    telefone: campoTelefone,
                    senha: camposenha,
                    logado: "0",
                    cor: "1",
                    carteirinha: "img/Portrait_Placeholder.png",
                    senhacanvas: "",
                    admin: "0"
                };

                insertContato(contato);
                alert("CONTA CRIADA COM SUCESSO!")
                window.location = "login.html";
            }

        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>

</body>

</html>